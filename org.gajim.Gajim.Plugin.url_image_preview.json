{
    "id": "org.gajim.Gajim.Plugin.url_image_preview",
    "runtime": "org.gajim.Gajim",
    "runtime-version": "stable",
    "sdk": "org.gnome.Sdk//3.28",
    "build-extension": true,
    "separate-locales": false,
    "appstream-compose": false,
    "build-options": {
        "env": {
            "PYTHONPATH": "/app/plugins/url_image_preview/lib/python3.5/site-packages/"
        }
    },
    "modules": [
        {
            "name": "python3-pillow",
            "buildsystem": "simple",
            "build-commands": [
                "install -d ${FLATPAK_DEST}/lib/python3.5/site-packages/",
                "python3 setup.py install --prefix=${FLATPAK_DEST}"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/d3/c4/b45b9c0d549f482dd072055e2d3ced88f3b977f7b87c7a990228b20e7da1/Pillow-5.2.0.tar.gz",
                    "sha256": "f8b3d413c5a8f84b12cd4c5df1d8e211777c9852c6be3ee9c094b626644d3eab"
                }
            ]
        },
        {
            "name": "gajim-url_image_preview",
            "buildsystem": "simple",
            "build-commands": [
                "cp -R -t ${FLATPAK_DEST} *"
            ],
            "post-install": [
                "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.gajim.Gajim.Plugin.url_image_preview.metainfo.xml",
                "appstream-compose --basename=org.gajim.Gajim.Plugin.url_image_preview --prefix=${FLATPAK_DEST} --origin=flatpak org.gajim.Gajim.Plugin.url_image_preview"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://ftp.gajim.org/plugins_releases/url_image_preview_2.2.0.zip",
                    "sha256": "1f2f0f908e7c493fa153f7cf513f598807978b7ebdc7af9fad232d95023b4fd3"
                },
                {
                    "type": "file",
                    "path": "org.gajim.Gajim.Plugin.url_image_preview.metainfo.xml",
                    "sha256": "3b11c6bcb9c349bb6b831031da6740f5da6fc1e925ab98c5c06a62d787ca26fc"
                }
            ]
        }
    ]
}
